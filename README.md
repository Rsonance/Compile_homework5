# SLR(1) 语法分析器

## 项目简介

本项目实现了一个 SLR(1) 语法分析器，用于对输入的代码进行语法分析并生成中间代码。它包含文法解析、FIRST/FOLLOW 集计算、SLR(1)
表构建以及语法分析等功能。

## 文件说明

### output.txt

- **文件类型**：文本文件
- **用途**：存放待分析的代码的词法分析结果，每行表示一个词法单元，格式为 `(类型, 值)`。
- **示例**：
  <!--
  (KEY, int)
  (ID, x)
  (SCO, ;)
  -->

### sentences.txt

- **文件类型**：文本文件
- **用途**：定义了用于语法分析的文法规则，每行表示一个产生式，格式为 `非终结符 -> 右部`。
- **示例**：

```
  P->CQ
  C->ε|CD;
```

### SLR_parser.py

- **文件类型**：Python 脚本
- **用途**：实现了 SLR(1) 语法分析器的核心功能，包括文法解析、FIRST/FOLLOW 集计算、SLR(1) 表构建以及语法分析等。
- **主要功能模块**：
    - `TokenMapper`：负责将词法单元映射为语法分析所需的符号。
    - `Grammar`：用于解析文法规则并计算 FIRST/FOLLOW 集。
    - `SLRParser`：构建 SLR(1) 表并进行语法分析。
    - `SLRParserEngine`：提供语法分析的入口，负责读取输入文件、调用解析器并生成中间代码。

### table_of_SLR.py

- **文件类型**：Python 脚本
- **用途**：用于构建 SLR(1) 表，包括 ACTION 表和 GOTO 表。
- **主要功能模块**：
    - `Grammar`：解析文法规则并计算 FIRST/FOLLOW 集。
    - `SLRParser`：构建 SLR(1) 表并打印相关信息。

## 使用说明

### 1. 准备输入文件

- 将待分析的代码的词法分析结果保存到 `output.txt` 文件中。
- 确保文法规则已定义在 `sentences.txt` 文件中（或在代码中直接指定）。

### 2. 运行 SLR(1) 语法分析器

- 在命令行中运行 `SLR_parser.py` 脚本：

```
python SLR_parser.py
```

- 脚本将读取 `output.txt` 文件中的词法分析结果，进行语法分析，并输出中间代码。

### 3. 查看 SLR(1) 表

- 运行 `table_of_SLR.py` 脚本：

```
  python table_of_SLR.py
```

- 脚本将打印出 SLR(1) 表的详细信息，包括 ACTION 表和 GOTO 表。

## 示例运行

假设 `output.txt` 文件内容如下：

```
(KEY, int)
(ID, x)
(SCO, ;)
```

运行 `SLR_parser.py` 脚本后，输出示例：

```
=== SLR(1) 语法分析器 ===
=== 开始 SLR 语法分析 ===

=== 映射后的终结符序列 ===
 0: (KEY    , int    , 行 1) -> 'int'
 1: (ID     , x      , 行 2) -> 'd'
 2: (SCO    , ;      , 行 3) -> ';'

=== 语法分析过程 ===
步骤  状态栈          符号栈                  输入       动作       中间代码
-------------------------------------------------------------------------------
0     [0]             []                      int(d      移进
1     [0, 2]          ['int']                 d(;)       移进
2     [0, 2, 3]       ['int', 'd']            ;         归约      r11
3     [0, 2]          ['A']                   ;         移进
4     [0, 2, 4]       ['A', ';']              $         接受

=== 分析成功！ ===

=== 中间代码（四元式） ===
 1: ('=', 'x', None, 'x')
语法分析成功！程序符合语法规范。
```

## 注意事项

- 确保输入的词法分析结果格式正确，符合 `output.txt` 文件的要求。
- 文法规则应符合 SLR(1) 文法的要求，避免产生移进/归约冲突和归约/归约冲突。
- 项目中使用了 Python 3 进行开发，运行脚本时需确保已安装 Python 3 环境。